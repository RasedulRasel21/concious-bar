<section class="sources-section">
  <div class="section section-full">
    <h2 class="h0">{{ section.settings.heading }}</h2>
    <p class="sc_subtext">{{ section.settings.subheading }}</p>
    <div class="sources-wrapper">
      {% for block in section.blocks %}
        <div class="source-item {% if forloop.first %}first-source_item{% endif %}" onclick="window.location.href='{{ block.settings.link }}'">
          <img class="source-item-img" src="{{ block.settings.image | img_url: 'master' }}" alt="{{ block.settings.title }}">
          <div class="source-info">
            <div class="source-labels">
              {% if block.settings.current_batch %}
                <span class="badge current-batch">Current batch</span>
              {% endif %}
              <span class="badge specialty"><img src="https://cdn.shopify.com/s/files/1/0511/7067/2831/files/Frame_3.png?v=1743154454" class="badge-icon">{{ block.settings.badge_speciality }} </span>
            </div>
            <h3>{{ block.settings.title }}</h3>
        </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<style>

.sources-section {
  text-align: center;
  background: #f5edde;
  padding: 40px 20px;
}
.sources-wrapper {
  display: flex;
  gap: 20px;
  justify-content: space-between;
}
.source-info{
  padding: 16px 16px 20px;
}
.source-info h3{
  padding-top: 10px;
  font-size: 26px;
  font-weight: 400;
}  
.sc_subtext{
  max-width: 745px;
  margin: 0 auto;
  line-height: 120%;
  padding: 20px 0 40px;
}  
.badge-icon{
  width: 16px;
  height: 15px;
}  
.source-item {
  background: #FDF8EE;
  border-radius: 16px;
  text-align: left;
  cursor: pointer;
  width: 100%;
}
.source-item-img{
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  width: 100%;
}
.source-labels {
  display: flex;
  gap: 10px;
}
.badge {
  display: inline-block;
  padding: 5px 10px;
  border-radius: 30px;
  font-size: 14px !important;
}
.current-batch {
  background: #39180F;
  color: #fff;
}
.specialty {
  background: #ECE5D4;
  font-weight: 100;
  display: flex !important;
}
.sources-wrapper::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}
@media (max-width: 767px) {
  .sources-section {
    padding: 40px 0 !important;
}
  .first-source_item{
    margin-left: 20px;
  }
  .sources-section h2{
    padding: 0 20px;
  }
  .sources-wrapper {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    
    /* Hide scrollbar */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* Internet Explorer and Edge */
}

.sources-wrapper::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

  .source-item {
    min-width: 84%;
    scroll-snap-align: center;
  }
  .sources-section .section{
    padding: 0 !important;
  }
  .sc_subtext {
    padding: 20px !important;
    font-size: 14px;
}
.source-info {
    padding: 10px 6px 14px !important;
} 
 .badge {
    padding: 4px 6px !important;
    font-size: 10px !important;
} 
 .source-info h3 {
    font-size: 18px !important;
    padding-top: 6px !important;
} 
}
@media (max-width: 1024px) {
  .sources-wrapper {
    display: flex;
    overflow-x: scroll;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    
    /* Hide scrollbar */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* Internet Explorer and Edge */
  }
}

@media (max-width: 1024px) and (min-width: 768px) {
  .source-item {
    min-width: 48%;
    scroll-snap-align: center;
  }
  .sources-wrapper {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    
    /* Hide scrollbar */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* Internet Explorer and Edge */
  }
   .badge {
    font-size: 12px !important;
} 
}


</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (window.innerWidth <= 1024) {
      const slider = document.querySelector(".sources-wrapper");
      let isDown = false;
      let startX;
      let scrollLeft;
      
      slider.addEventListener("mousedown", (e) => {
        isDown = true;
        slider.classList.add("active");
        startX = e.pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
      });
      slider.addEventListener("mouseleave", () => {
        isDown = false;
        slider.classList.remove("active");
      });
      slider.addEventListener("mouseup", () => {
        isDown = false;
        slider.classList.remove("active");
      });
      slider.addEventListener("mousemove", (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - slider.offsetLeft;
        const walk = (x - startX) * 2;
        slider.scrollLeft = scrollLeft - walk;
      });
    }
  });
</script>
{% schema %}
{
  "name": "Image-with-text-trade",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our sources"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Direct trade isn’t just a buzzword—it’s a commitment to integrity, quality, and transparency. It’s our way of ensuring chocolate is better for everyone—from the farmers to you."
    }
  ],
  "blocks": [
    {
      "type": "source_item",
      "name": "Source Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Semuliki Forest, Uganda"
        },
        {
          "type": "checkbox",
          "id": "current_batch",
          "label": "Mark as Current Batch",
          "default": false
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "badge_speciality",
          "label": "Badge speciality",
          "default": "Specialty of the farm"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image-with-text-trade",
      "category": "Custom Sections",
      "blocks": [
        {
          "type": "source_item"
        },
        {
          "type": "source_item"
        },
        {
          "type": "source_item"
        }
      ]
    }
  ]
}
{% endschema %}
